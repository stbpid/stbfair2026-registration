<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STB | SocTech Fair 2026</title>
    
    <link rel="icon" type="image/png" href="favicon.png">

    <style>
        body, html { margin: 0; padding: 0; height: 100%; width: 100%; overflow: hidden; font-family: 'Segoe UI', sans-serif; }
        
        
        iframe { width: 100%; height: 100%; border: none; display: none; } 

        #loading {
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            height: 100vh; background-color: #ffffff; color: #003366;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #003366; /* DSWD Blue */
            border-radius: 50%;
            width: 45px;
            height: 45px;
            animation: spin 1s linear infinite;
            margin-bottom: 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>

    <div id="loading">
        <div class="spinner"></div>
        <p>Loading DSWD Digital Tool...</p>
    </div>

    <iframe id="appFrame" src="" allow="camera; microphone; clipboard-read; clipboard-write;"></iframe>

    <script>
        const baseExecLink = "https://script.google.com/macros/s/AKfycbwYJ3hDyjrb6RbBmh2BuWisOXlaUFosYrM37zIF6HMEGsGH9bYreTicK-hn_UvTcS7c/exec";

    function loadApp() {
        const params = new URLSearchParams(window.location.search);
        const p = params.get('p') || 'index'; 

        const frame = document.getElementById('appFrame');
        const loader = document.getElementById('loading');

        let pageName = 'index'; // default
        if (p === 'dashboard') pageName = 'Dashboard';
        if (p === 'scanner') pageName = 'Scanner';

        frame.src = baseExecLink + "?p=" + pageName;
        
        frame.onload = () => {
            loader.style.display = 'none';
            frame.style.display = 'block';
        };
    }
    window.onload = loadApp;
</script>
</body>
</html>
